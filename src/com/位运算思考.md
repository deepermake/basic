# 位运算

## 核心概念

### 二进制基础

所有数据在计算机中以二进制形式存储（ 0 或 1 ），位运算直接操作这些二进制位，无需转换位十进制。

### 位运算类型

+ 逻辑运算
    + 与（ & ）：两位都为1时结果为1
    + 或（ | ）：任一位为1时结果为1
    + 异或（ ^ ）：两位不同时结果为1
    + 取反（ ~ ）：0变1，1变0
+ 位移运算
    + 左移（ << ）：高位溢出丢弃，低位补0
    + 右移（ >> ）：低位溢出丢弃，高位补符号位（算术右移）或0（逻辑右移）

## 核心特点

1. 高效性
2. 低资源消耗
3. 灵活性

## 典型应用场景

1. 状态与权限管理
2. 数据压缩与优化
3. 算法优化
    + 判断奇偶性：(n & 1) == 0
    + 计算2的幂：1 << n
    + 统计二进制中1的个数：循环使用 n &= (n-1)
    + 判断第i位是否为1：num & (1 << i)

## 统计数字出现次数

### 常见常见题

+ 其他数出现偶数次，目标数出现奇数次  
  使用异或运算（ ^ ）遍历所有元素，结果即为出现奇数次的数。
    + 原理：相同数异或结果为0，异或运算满足交换律和结合律
+ 其他数出现固定数（如3次），目标数出现1次    
  统计所有数字出现二进制每一位的1出现次数，取模固定次数后得到目标数。
    + 步骤：
        1. 创建32位数组统计每位1的总数
        2. 每位总数取模（如3），余数位目标数对应的位的值
    + 示例：数组【2，2，3，2】，统计每位1的总数后取模3，得到目标数3
+ 多个数出现奇数次，其余出现偶数次  
  分组异或：通过异或结果的二进制特征（如首个不同位）将数组拆分为两组，分别异或得到结果。
    + 示例：数组【a,a,b,b,c,d】，异或结果为c^d，通过二进制为分组后分别异或得到c和d

### 核心方法

1. 异或运算（XOR）
    + 单次遍历异或所有元素，时间复杂度O(n)，空间复杂度O(1)
    + 适用条件：仅一个数出现奇数次，其他出现偶数次
2. 二进制位统计法
    + 对每个二进制位统计1的总数，通过取模、与运算等筛选目标数
    + 适用条件：目标出现次数与其他数次数成倍数关系（如其他数出现3次，目标出现1次）
3. 掩码与分组策略
    + 结合掩码（如n & (-n)）分离不同特征的数据组，再分别处理 

### 小技巧
+ 大写字符与小写字符的ASCII的差为32，可以表示为 1 << 5